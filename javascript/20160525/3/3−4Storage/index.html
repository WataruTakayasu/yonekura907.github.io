<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ローカルストレージ</title>
</head>
<body>
  <button id="btn0">ローカルストレージに何か保存する</button>
  <button id="btn1">ローカルストレージから値を取得</button>
  <button id="btn2">ローカルストレージの値を更新する</button>
  <button id="btn3">ローカルストレージから値を取得</button>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script>
  ;(function(){

    $(function(){
      setEvent();
    });

    var setEvent = function(){

      $('#btn1').on('click',function(evt){
        // 保存するデータ
        var obj = {
          name:'takeda',
          age:35

        };

        //ObjectをJSONに変換
        var json = JSON.stringify(obj);
        window.localStorage.setItem('sample', json);

      });

      $('#btn1').on('click',function(evt){
        // キーsampleからjsonを取得
        var json = window.localStorage.getItem('sample');

        //JSONからObjectに変換
        var obj = JSON.parse(json)

        console.log(obj.name);
        console.log(obj.age);
      });

      $('#btn2').on('click',function(evt){
        // ローカルストレージから値を取得する
        var json = window.localStorage.getItem('sample');
        //JSONからObjectに変換
        var obj = JSON.parse(json)

        // nameを更新
        obj.name='おうぎ';

        //ObjectをJSONに変換
        var jsonData = JSON.stringify(obj);

        // 更新したデータを保存
        window.localStorage.setItem('sample',jsonData);

      });

    }

  })();

  </script>
</body>
</html>
