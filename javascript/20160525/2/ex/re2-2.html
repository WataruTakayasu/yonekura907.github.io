<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>DOM操作</title>
</head>
<body>

<button id="addHead">先頭に追加</button>
<button id="addFoot">末尾に追加</button>
<button id="removeHead">先頭から削除</button>
<button id="removeFoot">末尾から削除</button>

<ul id="colorList">
  <li>aaaaa</li>
</ul>

<script>
;(function(){

  var counter = 0;
  var colorCounter = 0;
  var colors = ['red','blue','yellow','green'];
  var outputList = null;
  var d = document;

  d.addEventListener('DOMContentLoaded', function(){
    outputList = d.querySelector('#colorList');
    setEvent();
  });

  var setEvent = function(){
    d.querySelector('#addHead').addEventListener('click', addHeadList, false);
    d.querySelector('#addFoot').addEventListener('click', addFootList, false);
    d.querySelector('#removeHead').addEventListener('click', removeHeadList, false);
    d.querySelector('#removeFoot').addEventListener('click', removeFootList, false);
  }

  var addHeadList = function(){
    console.log('先頭に追加');
    var targetElm = createList(); // <li></li>を返す
    console.log(targetElm);
    // ul の最初の行にtargetElmを挿入
    outputList.insertBefore(targetElm, outputList.firstChild);

  }

  var addFootList = function(){
    console.log('末尾に追加');
    var targetElm = createList();  // <li></li>を返す
    outputList.appendChild(targetElm);
  }

  var removeHeadList = function(){
    console.log('先頭から削除');
    if (outputList.childNodes.length) {
      outputList.removeChild(outputList.firstChild);
    }
  }

  var removeFootList = function(){
    console.log('末尾から削除');
    if(outputList.childNodes.length){
      outputList.removeChild(outputList.lastChild);
    }
  }


  var createList = function(){
    counter++;
    var liElm = d.createElement('li');
    var text = d.createTextNode(counter + '個目の行');
    liElm.appendChild(text);

    liElm.style.backgroundColor = colors[getColor()];

    return liElm;

  }

  var getColor = function(){
    if(colors.length - 1 === colorCounter){
      colorCounter = 0;
    } else {
      colorCounter++;
    }

    return colorCounter;

  }



})();
</script>

</body>
</html>
