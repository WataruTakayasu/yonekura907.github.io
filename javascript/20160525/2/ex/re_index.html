<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>DOM操作</title>
</head>
<body>

<button id="addHead">先頭に追加</button>
<button id="addFoot">末尾に追加</button>
<button id="removeHead">先頭から削除</button>
<button id="removeFoot">末尾から削除</button>

<ul id="colorList">
  <li>aaaaa</li>
</ul>

<script>
;(function(){

  var colors = ['red','blue','yellow','orange'];
  var colorCount = 0;
  var count = 0;
  var outputList = null;
  var d = document;

  d.addEventListener('DOMContentLoaded',function(){

    // 出力先のDOMの取得
    outputList = d.querySelector('#colorList');

    // イベントの設定
    setEvent();

  });

  // イベントの設定
  var setEvent = function(){
    d.querySelector('#addHead').addEventListener('click',addHeadList,false);
    d.querySelector('#addFoot').addEventListener('click',addFootList,false);
    d.querySelector('#removeHead').addEventListener('click',removeHeadList,false);
    d.querySelector('#removeFoot').addEventListener('click',removeFootList,false);
  }

  // 後ろに追加
  var addHeadList = function(){
    console.log('先頭に追加');

    var targetEl = createList();
    console.log(targetEl);
    outputList.appendChild(targetEl);
  }
  // 前に追加
  var addFootList = function(){
    var targetEl = createList();
    outputList.insertBefore(targetEl,outputList.firstChild);
  }

  // うしろから削除
  var removeHeadList = function(){
    if(outputList.childNodes.length){
      outputList.removeChild(outputList.lastChild);
    }
  }

  // 前から削除
  var removeFootList = function(){
    if(outputList.childNodes.length){
      outputList.removeChild(outputList.firstChild);
    }
  }

  // List の生成
  var createList = function(){
    // カウンターを加算
    count++;

    // liを生成
    var liElm = d.createElement('li');
    var text = d.createTextNode(count + '個目の行');
    liElm.appendChild(text);

    // liに色を
    liElm.style.backgroundColor = colors[getColor()];

    return liElm;
  }

  // 色のカウンター
  var getColor = function(){
    if(colors.length-1 === colorCount){
      colorCount = 0;
    } else{
      colorCount++;
    }
    return colorCount;
  }

})();
</script>

</body>
</html>
