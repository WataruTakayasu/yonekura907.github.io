<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
</head>

<body>
    <h1>ex2-2</h1>
    <div id="control">
        <button id="push-button">最後にひとつ増やす</button>&nbsp;
        <button id="unshift-button">最初にひとつ増やす</button>&nbsp;
        <button id="pop-button">最後からひとつ減らす</button>&nbsp;
        <button id="shift-button">最初からひとつ減らす</button>
    </div>
    <ul id="output-list"></ul>

    <script>
    ;(function(){        
        var colors = ['red', 'yellow', 'gray', 'pink', 'blue'];    // 配色
        var colorsCnt = 0;      // 色のカウンタ
        var count = 0;          // 増やした数のカウンター
        
        var outputList = null;  // 出力場所のDOM格納用
        
        document.addEventListener('DOMContentLoaded', function(){
            // 出力場所DOMの取得
            outputList = d.querySelector('#output-list');

            // イベントの設定
            setEvet();
        });
        
        // イベントの設定
        var setEvet = function(){
            d.querySelector('#push-button').addEventListener('click', addLastList, false);
            d.querySelector('#unshift-button').addEventListener('click', addFirstList, false);
            d.querySelector('#pop-button').addEventListener('click', removeLastList, false);
            d.querySelector('#shift-button').addEventListener('click', removeFirstList, false);
        };
        
        // 最初に増やす
        var addLastList = function() {
            console.log('最後に増やす');
            // 増やす要素の生成
            var targetEl = createList();
            console.log(outputList);
            outputList.appendChild(targetEl);
        };

        var addFirstList = function(){
            console.log('最初にひとつ増やす');
            outputList.insertBefore(createList(), outputList.firstChild);
        };
        
        var removeLastList = function(){
            console.log('最後から減らす');
            if(outputList.childNodes.length){
                outputList.removeChild(outputList.lastChild);
            }
        };
        
        var removeFirstList = function(){
            console.log('最初から減らす');
            if(outputList.childNodes.length){
                outputList.removeChild(outputList.firstChild);
            }
        };

        var createList = function(){
            count++;    // 行数の文字列をカウントアップ
            
            // 要素生成
            var liElm = document.createElement('li');
            var text = document.createTextNode( (count) + '個目の行');
            // 文字列をliエレメントに追加
            liElm.appendChild(text);
            
            // li要素の背景色を設定
            liElm.style.backgroundColor = colors[getColor()];

            return liElm;
        };

        var getColor = function(){
            if(colors.length - 1 === colorsCnt){
                // 配列の最後までカウントアップしたので初期化
                colorsCnt = 0;
            }
            else {
                // カウントアップ
                colorsCnt++;
            }
            return colorsCnt;
        };
        
        
        
    })();
    </script>
</body>
</html>
