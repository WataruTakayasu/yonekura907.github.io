<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    
    
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script>
    ;(function(){
        // コンストラクタ関数
        var User = function(name){
            this.name = name;
            this.hello = function(){
                console.log('私の名前は' + this.name + 'です');
            };
        };

        // Userクラスからインスタンスを生成
        var takeda = new User('Takeda');
        var furuya = new User('Furuya');
        
        console.log(takeda === furuya); // false
        console.log(takeda.hello == furuya.hello);  // false
        
        
        var User2 = function(name){
            this.name = name;
        };
        User2.prototype.hello = function(){
            console.log('私の名前は' + this.name + 'です');
        }
        
        var takeda = new User2('Takeda');
        var furuya = new User2('Furuya');
        
        console.log(takeda === furuya);     // false
        console.log(takeda.hello === furuya.hello); // true
        console.log(takeda);
        
        //==========================================================
        // プロトタイプチェーン
        var Car = function(){};
        Car.prototype.name = 'Car';
        Car.prototype.speed = '普通だよ';
        Car.prototype.drive = function(){
            console.log(this.name + 'の速さは' + this.speed);
        };
        
        var superCar = new Car();
        superCar.drive();
        superCar.speed = '速いよ';
        superCar.drive();
        console.log(superCar);
        
        console.log(superCar instanceof Car);   // true;
        // var xxx = function(aTargetInstance){
        //     if(aTargetInstance instanceof Car){
        //         aTargetInstance.hello();
        //     }
        //     else if (aTargetInstance instanceof Animal){
        //         aTargetInstance.cry();
        //     }
        // }
        
        //==========================================================
        // プロトタイプ継承
        // 動物クラス(親クラス)
        var Animal = function(){
            this.hoge = 10;
        };
        
        Animal.prototype = {
            name: 'nanashi',
            age: 20,
            bark: 'Hogeeeeee',
            cry: function(){
                console.log(this.bark + 'と鳴いた');
            }
        };
        
        // いぬクラス（子クラス）
        var Dog = function(age){
            this.age = age;
        };
        
        Dog.prototype = new Animal();   // Dogクラスの親クラスがAnimalクラス
        Dog.prototype.bark = 'わんわん';
        
        var dog = new Dog(60);
        console.log(dog.name);  // nanashi
        console.log(dog.age);   // 60
        console.log(dog.bark);  // わんわん
        console.log(dog.hoge);  // 10（親クラスのコントラクタで定義した値も継承される）
        dog.cry();
        
        //========================================================
        // オーバーライド
        // クラスを継承する場合に、子クラス内で親クラスで定義されたメソッドを上書きすること。
        // このとき、親クラスは影響されない
        var Human = function(){
            this.name = 'nanashi'
        };
        Human.prototype.greeting = function(){
            console.log('こんにちは' + this.name);
        };
        
        function Takeda(name){
            this.name = name;
        }
        Takeda.prototype = new Human();
        
        // オーバーライド
        Takeda.prototype.greeting = function(){
            console.log('私の名前は武田です');
            
            // 親のgreetingメソッドをコールする
            Human.prototype.greeting.call(this);
            // call: callより前に書いたメソッドを引数で指定したオブジェクトで実行する
        };
        
        var takeda = new Takeda('T.Takeda');
        takeda.greeting();
        
        
    })();
    </script>
</body>
</html>



