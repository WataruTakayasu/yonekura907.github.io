<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>モジュールパターン</title>
</head>
<body>
列：<input type="text" id="col" name="col">
行：<input type="text" id="row" name="row">
<button id="show-btn" name="button">描画</button>
<div id="container"></div>
<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
// モジュールパターン
// デザインパターンのひとつ
// クロージャを使用して、「プライベート」な状態と構成をカプセル化

var Generator = (function(){

  var _containerEl = null;
  var _imageEL = null;


  _createOne = function(num){
    var misodaClone = _imageEl.clone(true);
    misodaClone.attr('id', 'num_' + num);
    return misodaClone;
  };

  _showImages = function(aFragmentEl){
    _containerEl.appned(aFragmentEl);
  }


  return {
    init: function(){
      _containerEl = $('#container');
      _imageEL = $('<img>');
      _imageEL.css({'display':'inline-block'})
              .html('<img src="images/misoda.png" width="50">');

    },
    createImages: function(row,col){

      var fragment = $('<div>');
      var oneLineEl = null;

      for (var cnt = 0; cnt < row; cnt++) {
        if(cnt % col === 0){
          oneLineEl = $('<div>');
          fragment.append(oneLineEl);
        }

        oneLineEl.append(_createOne(cnt));
      }

    }
  }
})();




var Controller = (function(){

  var _btnHandler = function(evt){
    if(evt.target.id === 'show-btn'){
      // misodaを表示する
      var row = parseInt($('#row').val());
      var col = parseInt($('#col').val());
      Generator.createImages(row,col);
    } else {
      // misodaを消す
    }
  }


  return {
    setEvent: function(){
      $('#show-btn').on('click', _btnHandler)
    }
  }

})();


</script>
</body>
</html>
