<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>プロトタイプ</title>
</head>
<body>
<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
;(function(){

  // コンストラクタ関数
  var User = function(aName){
    this.name = aName;
    // メソッドを追加
    this.hello = function () {
      console.log('私の名前は' + this.name + 'です');
    }
  };

  // Userクラスからインスタンスを生成
  var takeda = new User('Takeda');
  var furuya = new User('Furuya');
  takeda.hello();
  furuya.hello();

  console.log(takeda === furuya); //false
  console.log(takeda.hello === furuya.hello); //false



  // プロトタイプパターン -------------------------------

  // コンストラクタ関数
  var User2 = function(aName){
    this.name = aName;
  };

  // プロトタイプ
  User2.prototype.hello = function(){
    console.log('私の名前は' + this.name + 'です');
  };

  // Userクラスからインスタンスを生成
  var yonekura = new User2('Yonekura');
  var ayano = new User2('Ayano');

  console.log(yonekura === ayano);
  console.log(yonekura.hello === ayano.hello); //true
  console.log(yonekura);



  // プロトタイプチェーン -------------------------------

  var Car = function(){

  };
  Car.prototype.name = 'Car';
  Car.prototype.speed = '普通だよ';

  Car.prototype.drive = function() {
    console.log(this.name + 'の速さは' + this.speed);
  };

  var superCar = new Car();
  superCar.drive();
  superCar.speed = '速いよ';
  superCar.drive();
  console.log(superCar);

  console.log(superCar instanceof Car); // superCarがCarのインスタンスか確認




  // プロトタイプ継承 -------------------------------
  var Animal = function(){
    this.hoge = 10;
  };

  // 動物クラス（親クラス）
  Animal.prototype = {
    name: 'nanashi',
    age: 20,
    bark: 'Hogeeee',
    cry:function(){
      console.log(this.bark + 'と鳴いた');
    }
  };

  // いぬクラス（子クラス）
  var Dog = function(aAge){
    this.age = aAge;
  };

  // Dogクラスの親クラスがAnimalクラスになる　継承関係
  Dog.prototype = new Animal();
  Dog.prototype.bark = 'わんわん';

  var dog = new Dog(60);

  console.log(dog.name); // nanashi
  console.log(dog.age); // 60
  console.log(dog.bark); // わんわん
  console.log(dog.hoge); //10 (親クラスのコンストラクタで定義した値も継承される)
  dog.cry();



  // オーバーライド -------------------------------------
  // クラスを継承する場合に、子クラス内で親クラスで定義されたメソッドを上書きすること
  // このとき、親クラスは影響されない

  var Human = function(){
    this.name = 'nanashi'
  };
  Human.prototype.greeting = function(){
    console.log('こんにちは' + this.name);
  };

  function Takeda(aName){
    this.name = aName;
  }
  Takeda.prototype = new Human();

  // オーバーライド
  Takeda.prototype.greeting = function(){
    console.log('私の名前は武田です');

    // 親のグリーティングメソッドをコールする
    Human.prototype.greeting.call(this);
    // call : call より前に書いたメソッドに引数で指定したオブジェクトで実行する
  };


  var takeda = new Takeda('T.Takeda');
  takeda.greeting();




})();
</script>


</body>
</html>
